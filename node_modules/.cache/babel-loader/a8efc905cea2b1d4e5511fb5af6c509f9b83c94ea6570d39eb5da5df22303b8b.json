{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.overrideEvents = void 0;\nconst state_1 = require(\"./state\");\nconst safe_require_1 = require(\"./safe-require\");\nconst console = (0, safe_require_1.safeRequire)('console');\nconst mid = 'paused, type `resume()` in the console to resume the test. Paused on:';\nconst overrideEvents = page => {\n  const locator = page.locator('');\n  const proto = Object.getPrototypeOf(locator);\n  for (const evt of ['click', 'dblclick']) {\n    proto[evt] = async function (options) {\n      if (state_1.state.pauseAtEveryStep) {\n        const optionsStr = options ? JSON.stringify(options) : '';\n        const selector = JSON.stringify(this._selector);\n        const test = state_1.state.activeTest;\n        const msg = `'${test}' ${mid} page.locator(${selector}).${evt}(${optionsStr})`;\n        console.log(msg);\n        await page.evaluate(({\n          msg\n        }) => console.log(msg), {\n          msg\n        });\n        await state_1.state.pause?.();\n      }\n      return this.dispatchEvent(evt, null, {\n        strict: true,\n        ...options\n      });\n    };\n    page.constructor.prototype[evt] = async function (selector, options) {\n      if (state_1.state.pauseAtEveryStep) {\n        const optionsStr = options ? `, ${JSON.stringify(options)}` : '';\n        const selectorStr = JSON.stringify(selector);\n        const test = state_1.state.activeTest;\n        const msg = `'${test}' ${mid} page.${evt}(${selectorStr}${optionsStr})`;\n        console.log(msg);\n        await page.evaluate(({\n          msg\n        }) => console.log(msg), {\n          msg\n        });\n        await state_1.state.pause?.();\n      }\n      return this.dispatchEvent(selector, evt, undefined, {\n        strict: true,\n        ...options\n      });\n    };\n  }\n};\nexports.overrideEvents = overrideEvents;","map":{"version":3,"names":["state_1","require","safe_require_1","console","safeRequire","mid","overrideEvents","page","locator","proto","Object","getPrototypeOf","evt","options","state","pauseAtEveryStep","optionsStr","JSON","stringify","selector","_selector","test","activeTest","msg","log","evaluate","pause","dispatchEvent","strict","constructor","prototype","selectorStr","undefined","exports"],"sources":["/Users/nour/Documents/GitHub/safeTestProject-v1/node_modules/safetest/src/override-events.ts"],"sourcesContent":["import { Page } from 'playwright';\nimport { state } from './state';\nimport { safeRequire } from './safe-require';\n\nconst console = safeRequire('console');\n\nconst mid =\n  'paused, type `resume()` in the console to resume the test. Paused on:';\n\nexport const overrideEvents = (page: Page) => {\n  const locator = page.locator('');\n  const proto = Object.getPrototypeOf(locator);\n  for (const evt of ['click', 'dblclick'] as const) {\n    proto[evt] = async function (options: any) {\n      if (state.pauseAtEveryStep) {\n        const optionsStr = options ? JSON.stringify(options) : '';\n        const selector = JSON.stringify(this._selector);\n        const test = state.activeTest;\n        const msg = `'${test}' ${mid} page.locator(${selector}).${evt}(${optionsStr})`;\n        console.log(msg);\n        await page.evaluate(({ msg }) => console.log(msg), { msg });\n        await state.pause?.();\n      }\n      return this.dispatchEvent(evt, null, { strict: true, ...options });\n    };\n    page.constructor.prototype[evt] = async function (\n      selector: any,\n      options: any\n    ) {\n      if (state.pauseAtEveryStep) {\n        const optionsStr = options ? `, ${JSON.stringify(options)}` : '';\n        const selectorStr = JSON.stringify(selector);\n        const test = state.activeTest;\n        const msg = `'${test}' ${mid} page.${evt}(${selectorStr}${optionsStr})`;\n        console.log(msg);\n        await page.evaluate(({ msg }) => console.log(msg), { msg });\n        await state.pause?.();\n      }\n\n      return this.dispatchEvent(selector, evt, undefined, {\n        strict: true,\n        ...options,\n      });\n    };\n  }\n};\n"],"mappings":";;;;;;AACA,MAAAA,OAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AAEA,MAAME,OAAO,GAAG,IAAAD,cAAA,CAAAE,WAAW,EAAC,SAAS,CAAC;AAEtC,MAAMC,GAAG,GACP,uEAAuE;AAElE,MAAMC,cAAc,GAAIC,IAAU,IAAI;EAC3C,MAAMC,OAAO,GAAGD,IAAI,CAACC,OAAO,CAAC,EAAE,CAAC;EAChC,MAAMC,KAAK,GAAGC,MAAM,CAACC,cAAc,CAACH,OAAO,CAAC;EAC5C,KAAK,MAAMI,GAAG,IAAI,CAAC,OAAO,EAAE,UAAU,CAAU,EAAE;IAChDH,KAAK,CAACG,GAAG,CAAC,GAAG,gBAAgBC,OAAY;MACvC,IAAIb,OAAA,CAAAc,KAAK,CAACC,gBAAgB,EAAE;QAC1B,MAAMC,UAAU,GAAGH,OAAO,GAAGI,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC,GAAG,EAAE;QACzD,MAAMM,QAAQ,GAAGF,IAAI,CAACC,SAAS,CAAC,IAAI,CAACE,SAAS,CAAC;QAC/C,MAAMC,IAAI,GAAGrB,OAAA,CAAAc,KAAK,CAACQ,UAAU;QAC7B,MAAMC,GAAG,GAAG,IAAIF,IAAI,KAAKhB,GAAG,iBAAiBc,QAAQ,KAAKP,GAAG,IAAII,UAAU,GAAG;QAC9Eb,OAAO,CAACqB,GAAG,CAACD,GAAG,CAAC;QAChB,MAAMhB,IAAI,CAACkB,QAAQ,CAAC,CAAC;UAAEF;QAAG,CAAE,KAAKpB,OAAO,CAACqB,GAAG,CAACD,GAAG,CAAC,EAAE;UAAEA;QAAG,CAAE,CAAC;QAC3D,MAAMvB,OAAA,CAAAc,KAAK,CAACY,KAAK,GAAE,CAAE;;MAEvB,OAAO,IAAI,CAACC,aAAa,CAACf,GAAG,EAAE,IAAI,EAAE;QAAEgB,MAAM,EAAE,IAAI;QAAE,GAAGf;MAAO,CAAE,CAAC;IACpE,CAAC;IACDN,IAAI,CAACsB,WAAW,CAACC,SAAS,CAAClB,GAAG,CAAC,GAAG,gBAChCO,QAAa,EACbN,OAAY;MAEZ,IAAIb,OAAA,CAAAc,KAAK,CAACC,gBAAgB,EAAE;QAC1B,MAAMC,UAAU,GAAGH,OAAO,GAAG,KAAKI,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC,EAAE,GAAG,EAAE;QAChE,MAAMkB,WAAW,GAAGd,IAAI,CAACC,SAAS,CAACC,QAAQ,CAAC;QAC5C,MAAME,IAAI,GAAGrB,OAAA,CAAAc,KAAK,CAACQ,UAAU;QAC7B,MAAMC,GAAG,GAAG,IAAIF,IAAI,KAAKhB,GAAG,SAASO,GAAG,IAAImB,WAAW,GAAGf,UAAU,GAAG;QACvEb,OAAO,CAACqB,GAAG,CAACD,GAAG,CAAC;QAChB,MAAMhB,IAAI,CAACkB,QAAQ,CAAC,CAAC;UAAEF;QAAG,CAAE,KAAKpB,OAAO,CAACqB,GAAG,CAACD,GAAG,CAAC,EAAE;UAAEA;QAAG,CAAE,CAAC;QAC3D,MAAMvB,OAAA,CAAAc,KAAK,CAACY,KAAK,GAAE,CAAE;;MAGvB,OAAO,IAAI,CAACC,aAAa,CAACR,QAAQ,EAAEP,GAAG,EAAEoB,SAAS,EAAE;QAClDJ,MAAM,EAAE,IAAI;QACZ,GAAGf;OACJ,CAAC;IACJ,CAAC;;AAEL,CAAC;AApCYoB,OAAA,CAAA3B,cAAc,GAAAA,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}