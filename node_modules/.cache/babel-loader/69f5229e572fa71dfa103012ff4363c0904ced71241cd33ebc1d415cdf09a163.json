{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.exposeFunction = void 0;\nconst exposeFunction = async (page, name, fn) => {\n  let resolve = false;\n  const timeout = new Promise(r => setTimeout(r, 100));\n  const exposed = page.exposeFunction(name, fn).then(() => resolve = true);\n  return Promise.race([timeout, exposed]).then(async () => {\n    if (!resolve) {\n      await page.reload();\n      // @ts-ignore\n      const fn = await page.evaluate(name => typeof window[name], name);\n      if (fn !== 'function') return (0, exports.exposeFunction)(page, name, fn);\n    }\n  });\n};\nexports.exposeFunction = exposeFunction;","map":{"version":3,"names":["exposeFunction","page","name","fn","resolve","timeout","Promise","r","setTimeout","exposed","then","race","reload","evaluate","window","exports"],"sources":["/Users/nour/Documents/GitHub/safeTestProject-v1/node_modules/safetest/src/expose-function.ts"],"sourcesContent":["import type { Page } from 'playwright';\n\nexport const exposeFunction = async (\n  page: Page,\n  name: string,\n  fn: any\n): Promise<void> => {\n  let resolve = false;\n  const timeout = new Promise((r) => setTimeout(r, 100));\n  const exposed = page.exposeFunction(name, fn).then(() => (resolve = true));\n  return Promise.race([timeout, exposed]).then(async () => {\n    if (!resolve) {\n      await page.reload();\n      // @ts-ignore\n      const fn = await page.evaluate((name) => typeof window[name], name);\n      if (fn !== 'function') return exposeFunction(page, name, fn);\n    }\n  });\n};\n"],"mappings":";;;;;;AAEO,MAAMA,cAAc,GAAG,MAAAA,CAC5BC,IAAU,EACVC,IAAY,EACZC,EAAO,KACU;EACjB,IAAIC,OAAO,GAAG,KAAK;EACnB,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAEC,CAAC,IAAKC,UAAU,CAACD,CAAC,EAAE,GAAG,CAAC,CAAC;EACtD,MAAME,OAAO,GAAGR,IAAI,CAACD,cAAc,CAACE,IAAI,EAAEC,EAAE,CAAC,CAACO,IAAI,CAAC,MAAON,OAAO,GAAG,IAAK,CAAC;EAC1E,OAAOE,OAAO,CAACK,IAAI,CAAC,CAACN,OAAO,EAAEI,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,YAAW;IACtD,IAAI,CAACN,OAAO,EAAE;MACZ,MAAMH,IAAI,CAACW,MAAM,EAAE;MACnB;MACA,MAAMT,EAAE,GAAG,MAAMF,IAAI,CAACY,QAAQ,CAAEX,IAAI,IAAK,OAAOY,MAAM,CAACZ,IAAI,CAAC,EAAEA,IAAI,CAAC;MACnE,IAAIC,EAAE,KAAK,UAAU,EAAE,OAAO,IAAAY,OAAA,CAAAf,cAAc,EAACC,IAAI,EAAEC,IAAI,EAAEC,EAAE,CAAC;;EAEhE,CAAC,CAAC;AACJ,CAAC;AAhBYY,OAAA,CAAAf,cAAc,GAAAA,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}