"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.render = exports.SAFETEST_INTERFACE = void 0;
const deepmerge_1 = __importDefault(require("deepmerge"));
const state_1 = require("./state");
const is_in_node_1 = require("./is-in-node");
const get_page_1 = require("./get-page");
const safe_require_1 = require("./safe-require");
const ensure_dir_1 = require("./ensure-dir");
const make_pause_1 = require("./make-pause");
const get_retry_attempt_1 = require("./get-retry-attempt");
const anythingProxy_1 = require("./anythingProxy");
const expose_function_1 = require("./expose-function");
const defer_1 = require("./defer");
exports.SAFETEST_INTERFACE = '__safetestApi__';
const timeout = (ms) => new Promise((r) => setTimeout(r, ms).unref?.());
const IGNORE_CONSOLE_MESSAGES = [
    /^\[vite\] connected\.$/,
    /^\[vite\] connecting\.\.\.$/,
    /^Download the Vue Devtools extension for a better development experience/,
    /^You are running Vue in development mode/,
    /^%cDownload the React DevTools for a better development experience/,
    /\[HMR\] Waiting for update signal from WDS\.\.\.$/,
    /^\[webpack-dev-server\] Live Reloading enabled.$/,
    /^\[webpack-dev-server\] Server started/,
    /^Go to .* to debug this test$/,
    /^Download the Apollo DevTools/,
];
const backoffMs = [500, 750, 1000, 2000];
async function render(element, options, howToRender) {
    if (state_1.state.options) {
        options = (0, deepmerge_1.default)(state_1.state.options, options);
    }
    state_1.state.pauseAtEveryStep = !!options.debugTests;
    if (typeof process !== 'undefined' && process.env['SAFETEST_OPTIONS']) {
        options = (0, deepmerge_1.default)(options, JSON.parse(process.env['SAFETEST_OPTIONS']));
    }
    options.headless = state_1.state.debugging.has(state_1.state.activeTest ?? '')
        ? false
        : 'headless' in options
            ? options.headless
            : true;
    let url = options.url ??
        (typeof process !== 'undefined'
            ? process.env['BASE_URL']
            : 'http://localhost:3000') ??
        'http://localhost:3000';
    if (is_in_node_1.isInNode) {
        if (options.subPath) {
            url = `${new URL(options.subPath, options.url)}`;
        }
        const console = (0, safe_require_1.safeRequire)('console');
        let page = state_1.state.browserContextInstance?.pages()[0];
        const inspector = (0, safe_require_1.safeRequire)('inspector');
        const path = (0, safe_require_1.safeRequire)('path');
        const videoDir = options.recordVideo?.dir ?? options.videosPath;
        const getFilePath = () => {
            const filename = state_1.state.getState().testPath ?? '';
            state_1.state.testPath = filename;
            const bootstrapDir = path.dirname(state_1.state.bootstrappedAt);
            const filenameWithoutExt = filename.split('.').slice(0, -1).join('.');
            let relative = path.relative(bootstrapDir, filenameWithoutExt);
            if (!relative.startsWith('.'))
                relative = `./${relative}`;
            return relative;
        };
        const attempt = (0, get_retry_attempt_1.getRetryAttempt)();
        const switchingHeadlessness = state_1.state.browserContextInstance &&
            state_1.state.browserContextInstance.headless !== options.headless;
        if (!page || videoDir || switchingHeadlessness) {
            // If there is videoDir for this test, we need can't reuse an old browserContext that
            // wasn't recording video.
            ({ page } = await (0, get_page_1.getPage)(options, !!videoDir || switchingHeadlessness));
            if (!page._safetest_internal.safeTestExposed) {
                page._safetest_internal.safeTestExposed = true;
                await (0, expose_function_1.exposeFunction)(page, exports.SAFETEST_INTERFACE, async (type, ...args) => {
                    const safetest_internal = page._safetest_internal;
                    if (type === 'READY') {
                        return safetest_internal.renderIsReadyDeferred?.resolve();
                    }
                    if (type === 'GET_INFO') {
                        const info = {
                            testName: state_1.state.activeTest,
                            testPath: getFilePath(),
                            retryAttempt: attempt,
                        };
                        const hooks = safetest_internal.hooks;
                        for (const beforeRender of hooks.beforeRender ?? []) {
                            await beforeRender(page, info);
                        }
                        return info;
                    }
                    if (type === 'BRIDGE') {
                        const [response] = args;
                        if ('result' in response) {
                            safetest_internal.pendingBridge.resolve(response.result);
                        }
                        else {
                            safetest_internal.pendingBridge.reject(response.error);
                        }
                        return;
                    }
                    console.log('unhandled SAFETEST_INTERFACE call', JSON.stringify({ type, args }));
                    return;
                });
            }
        }
        page._safetest_internal = (0, deepmerge_1.default)(page._safetest_internal, {
            // coveragePath: options.coverageDir,
            videoDir,
            failureScreenshotDir: options.failureScreenshotsDir,
        });
        if (options.recordTraces) {
            await page.context().tracing.start({
                screenshots: true,
                snapshots: true,
                sources: true,
                title: state_1.state.activeTest,
            });
            const test = expect.getState().currentTestName ?? '<unknown>';
            const testPath = path
                .relative(process.cwd(), expect.getState().testPath)
                .replace(/[^a-z0-9_]/g, '_');
            const activeTest = state_1.state.activeTest;
            page._safetest_internal.hooks.afterTest.push(async () => {
                const safeName = activeTest?.replace(/[^a-z0-9_]/gi, '_');
                const path = `${options.recordTraces}/traces/${testPath}_${safeName}-attempt-${attempt}.zip`;
                state_1.state.artifacts.push({ type: 'trace', test, path, confirmed: true });
                try {
                    await page.context().tracing.stop({ path });
                }
                catch { }
            });
        }
        const isDebugging = state_1.state.debugging.has(state_1.state.activeTest ?? '');
        state_1.state.exposeGlobals['page'] = page;
        const pause = (state_1.state.pause = await (0, make_pause_1.makePause)({ page, isDebugging }));
        for (const beforeNavigate of page._safetest_internal.hooks.beforeNavigate) {
            await beforeNavigate(page);
        }
        const oldPagePause = page.pause;
        page.pause = (async () => {
            const url = inspector.url();
            let port = 0;
            if (url) {
                port = +new URL(url).port;
            }
            if (port)
                inspector.close();
            await oldPagePause.call(page);
            if (port) {
                inspector.open(port);
                inspector.waitForDebugger();
            }
        });
        const consoleMessagesGroups = {};
        page.on('console', async (msg) => {
            const text = msg.text();
            for (const ignore of [
                ...IGNORE_CONSOLE_MESSAGES,
                ...(options.ignoreConsoleMessages ?? []),
            ]) {
                if (ignore.test(text)) {
                    return;
                }
            }
            try {
                const args = (await Promise.all(msg.args().map((a) => a.jsonValue()))).map((a) => JSON.stringify(a));
                const params = [`${msg.type()}:`];
                if (args.length)
                    params.push(...args);
                else
                    params.push(text);
                const key = JSON.stringify(params);
                if (!consoleMessagesGroups[key])
                    consoleMessagesGroups[key] = 0;
                consoleMessagesGroups[key]++;
            }
            catch {
                const params = [`${msg.type()}:`, text];
                const key = JSON.stringify(params);
                if (!consoleMessagesGroups[key])
                    consoleMessagesGroups[key] = 0;
                consoleMessagesGroups[key]++;
            }
        });
        page._safetest_internal.hooks.afterTest.push(async () => {
            const consoleLines = [];
            const entries = Object.entries(consoleMessagesGroups);
            consoleLines.push('Console messages: ');
            for (const [key, count] of entries) {
                const args = JSON.parse(key).join(' ');
                consoleLines.push((count > 1 ? `(${count}X) ` : '') + `${args}`);
            }
            if (entries.length) {
                console.log(consoleLines.map((l, i) => (i ? `  ${l}` : l)).join('\n'));
            }
        });
        page._safetest_internal.hooks.afterTest.push(async () => {
            const errors = [];
            for (const [key, value] of Object.entries(state_1.state.pendingExpects)) {
                if (value)
                    errors.push(new Error(`Expected ${value} ${key}() calls to be awaited, but they were not.`));
            }
            state_1.state.pendingExpects = {};
            if (errors.length) {
                throw new Error(errors.map((e) => e.message).join('\n'));
            }
        });
        const failDir = page._safetest_internal.failureScreenshotDir;
        if (failDir) {
            const activeTest = state_1.state.activeTest;
            page._safetest_internal.hooks.afterTest.push(async () => {
                const passed = state_1.state.passedTests.has(activeTest ?? '');
                if (!passed) {
                    const pages = state_1.state.browserContextInstance?.pages();
                    for (const [index, page] of pages?.entries() ?? []) {
                        const suffix = index ? `_${index}` : '';
                        const path = `${failDir}/${activeTest}${suffix}.png`;
                        await page.screenshot({ path });
                    }
                }
            });
        }
        if (videoDir) {
            const test = expect.getState().currentTestName ?? '<unknown>';
            const testPath = path
                .relative(process.cwd(), expect.getState().testPath)
                .replace(/[^a-z0-9_]/g, '_');
            const activeTest = state_1.state.activeTest;
            page._safetest_internal.hooks.afterTest.push(async () => {
                const pages = state_1.state.browserContextInstance?.pages();
                for (const page of pages ?? []) {
                    const index = page._safetest_internal.pageIndex;
                    await (0, ensure_dir_1.ensureDir)(videoDir);
                    const suffix = (pages?.length ?? 0) > 1 ? `_tab${index}` : '';
                    const safeName = activeTest?.replace(/[^a-z0-9_]/gi, '_');
                    const newName = `${safeName}-attempt-${attempt}${suffix}.webm`;
                    const path = `${videoDir}/${testPath}_${newName}`;
                    state_1.state.artifacts.push({ type: 'video', test, path, confirmed: true });
                    page?.video()?.saveAs(path);
                }
            });
        }
        // Workaround issue where Playwright sometimes doesn't goto the url after a call to page.goto()
        const gotoAttempts = 5;
        let attemptsLeft = gotoAttempts;
        class PageReadyTimeoutError extends Error {
            constructor() {
                super(...arguments);
                this.name = 'PageReadyTimeoutError';
            }
        }
        const gotoTestUrl = async () => {
            const defer = (0, defer_1.deferred)();
            const rejectForTimeout = () => defer.reject(new PageReadyTimeoutError());
            const getUrl = () => {
                return page.evaluate(() => location.href).catch(() => page.url());
            };
            const attempt = gotoAttempts - attemptsLeft;
            const initialNavigationTimeout = options.initialNavigationTimeout ??
                options.defaultNavigationTimeout ??
                backoffMs[attempt] ??
                5000;
            setTimeout(async () => {
                if (gotoAttempts - attemptsLeft !== attempt)
                    return;
                // Sometimes the page.goto doesn't register, this will detect that.
                const halted = new URL(await getUrl()).origin !== new URL(url).origin;
                if (halted)
                    return rejectForTimeout();
                // The page has no pending network requests and didn't resolve `renderIsReadyDeferred`.
                page.waitForLoadState('networkidle').then(rejectForTimeout, () => { });
            }, initialNavigationTimeout);
            page
                .goto(url, { waitUntil: 'commit', timeout: initialNavigationTimeout })
                .catch(async (error) => {
                const halted = new URL(await getUrl()).origin !== new URL(url).origin;
                if (halted)
                    defer.reject(error);
            })
                .then(() => page._safetest_internal.renderIsReadyDeferred?.promise)
                .then(() => defer.resolve());
            return defer.promise.catch((error) => {
                const shouldRetry = attemptsLeft-- > 0;
                const plan = shouldRetry
                    ? `retrying (attempts left: ${attemptsLeft + 1})...`
                    : 'giving up';
                console.log(`page.goto error: ${error.name} on "${state_1.state.activeTest}" ${plan}`);
                if (shouldRetry)
                    return gotoTestUrl();
                throw new PageReadyTimeoutError();
            });
        };
        const testName = state_1.state.activeTest;
        page._safetest_internal.renderIsReadyDeferred = (0, defer_1.deferred)();
        await gotoTestUrl();
        const debugUrl = await page.evaluate(({ testName, testPath }) => {
            const url = new URL(window.location.href);
            url.searchParams.set('test_name', testName);
            url.searchParams.set('test_path', testPath);
            const debugUrl = url.toString().replace(/%2F/g, '/');
            console.log(`Go to ${debugUrl} to debug this test`);
            return debugUrl;
        }, { testName: state_1.state.activeTest, testPath: getFilePath() });
        if (isDebugging) {
            console.log(`Go to ${debugUrl} to debug this test`);
        }
        page._safetest_internal.hooks.afterTest.push(async () => {
            const activeTest = testName ?? '';
            timeout(100).then(() => {
                const passed = state_1.state.passedTests.has(activeTest);
                if (!passed && !isDebugging) {
                    console.log(`'${state_1.state.activeTest}' Failed. Go to ${debugUrl.replace('host.docker.internal', 'localhost')} to debug this test`);
                }
            });
        });
        const bridge = (state_1.state.bridge = async (passed) => {
            if (typeof passed === 'function')
                passed = {};
            page._safetest_internal.pendingBridge = (0, defer_1.deferred)();
            await page.evaluate(({ passed, SAFETEST_INTERFACE }) => {
                const { callback, defer } = window[SAFETEST_INTERFACE]
                    .bridgePending;
                Promise.resolve()
                    .then(() => callback(passed))
                    .then((result) => {
                    window[SAFETEST_INTERFACE]('BRIDGE', { result });
                    defer.resolve(result);
                })
                    .catch((error) => {
                    window[SAFETEST_INTERFACE]('BRIDGE', { error })(window)
                        .safeTestBridge({ error });
                    defer.reject(error);
                });
            }, { passed, SAFETEST_INTERFACE: exports.SAFETEST_INTERFACE });
            return await page._safetest_internal.pendingBridge?.promise;
        });
        const rendered = {
            page,
            pause,
            bridge,
            require: safe_require_1.safeRequire,
        };
        return rendered;
    }
    else {
        if (!state_1.state.browserState) {
            throw new Error('App was not bootstrapped to use safetest correctly');
        }
        if (options.subPath) {
            try {
                const dummyUrl = new URL(options.subPath, 'http://localhost:3000');
                const pathname = dummyUrl.pathname;
                const dummyUrl2 = new URL(options.subPath, dummyUrl);
                const different = pathname !== dummyUrl2.pathname;
                // subPath is something like `foo/` and every page reload we'll end up adding another `foo/` to the url incorrectly.
                // This is detects and breaks out of that loop.
                const skip = different && location.pathname.includes(pathname);
                if (!skip) {
                    const url = new URL(options.subPath, location.href);
                    const search = new URLSearchParams([
                        ...url.searchParams,
                        ...[...new URLSearchParams(location.search)],
                    ]).toString();
                    url.search = search;
                    url.hash = location.hash;
                    history.pushState(null, '', `${url}`);
                }
            }
            catch { }
        }
        await howToRender(element);
        const bridge = (state_1.state.bridge = (passed, callback) => {
            if (!callback)
                callback = passed;
            const defer = (0, defer_1.deferred)();
            if (!window[exports.SAFETEST_INTERFACE]) {
                console.log('Test is waiting for a bridge call, you can manually invoke it with: `bridged(...)`. Waiting by:', callback);
                window.bridged = (passed) => {
                    delete window.bridged;
                    defer.resolve(passed);
                    return callback(passed);
                };
            }
            else {
                window[exports.SAFETEST_INTERFACE].bridgePending = { callback, defer };
            }
            return defer.promise;
        });
        if (typeof window[exports.SAFETEST_INTERFACE] === 'function') {
            window[exports.SAFETEST_INTERFACE]?.('READY');
        }
        // await timeout(0);
        return {
            page: anythingProxy_1.anythingProxy,
            pause: () => Promise.resolve(),
            bridge,
            require: anythingProxy_1.anythingProxy,
        };
    }
}
exports.render = render;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3JlbmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQSwwREFBOEI7QUFFOUIsbUNBQWdDO0FBQ2hDLDZDQUF3QztBQUN4Qyx5Q0FBcUM7QUFDckMsaURBQTBEO0FBQzFELDZDQUF5QztBQUV6Qyw2Q0FBeUM7QUFDekMsMkRBQXNEO0FBQ3RELG1EQUFnRDtBQUVoRCx1REFBbUQ7QUFDbkQsbUNBQW1DO0FBRXRCLFFBQUEsa0JBQWtCLEdBQUcsaUJBQWlCLENBQUM7QUFFcEQsTUFBTSxPQUFPLEdBQUcsQ0FBQyxFQUFVLEVBQUUsRUFBRSxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztBQXlFaEYsTUFBTSx1QkFBdUIsR0FBRztJQUM5Qix3QkFBd0I7SUFDeEIsNkJBQTZCO0lBQzdCLDBFQUEwRTtJQUMxRSwwQ0FBMEM7SUFDMUMsb0VBQW9FO0lBQ3BFLG1EQUFtRDtJQUNuRCxrREFBa0Q7SUFDbEQsd0NBQXdDO0lBQ3hDLCtCQUErQjtJQUMvQiwrQkFBK0I7Q0FDaEMsQ0FBQztBQUVGLE1BQU0sU0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFVLENBQUM7QUFFM0MsS0FBSyxVQUFVLE1BQU0sQ0FDMUIsT0FBd0IsRUFDeEIsT0FBc0IsRUFDdEIsV0FBdUQ7SUFFdkQsSUFBSSxhQUFLLENBQUMsT0FBTyxFQUFFO1FBQ2pCLE9BQU8sR0FBRyxJQUFBLG1CQUFLLEVBQUMsYUFBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUN6QztJQUNELGFBQUssQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztJQUU5QyxJQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLEVBQUU7UUFDckUsT0FBTyxHQUFHLElBQUEsbUJBQUssRUFDYixPQUFPLEVBQ1AsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQWtCLENBQzdELENBQUM7S0FDSDtJQUNELE9BQU8sQ0FBQyxRQUFRLEdBQUcsYUFBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsYUFBSyxDQUFDLFVBQVUsSUFBSSxFQUFFLENBQUM7UUFDNUQsQ0FBQyxDQUFDLEtBQUs7UUFDUCxDQUFDLENBQUMsVUFBVSxJQUFJLE9BQU87WUFDdkIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRO1lBQ2xCLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDVCxJQUFJLEdBQUcsR0FDTCxPQUFPLENBQUMsR0FBRztRQUNYLENBQUMsT0FBTyxPQUFPLEtBQUssV0FBVztZQUM3QixDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUM7WUFDekIsQ0FBQyxDQUFDLHVCQUF1QixDQUFDO1FBQzVCLHVCQUF1QixDQUFDO0lBRTFCLElBQUkscUJBQVEsRUFBRTtRQUNaLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRTtZQUNuQixHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1NBQ2xEO1FBQ0QsTUFBTSxPQUFPLEdBQUcsSUFBQSwwQkFBVyxFQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3ZDLElBQUksSUFBSSxHQUFHLGFBQUssQ0FBQyxzQkFBc0IsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQWEsQ0FBQztRQUVoRSxNQUFNLFNBQVMsR0FBRyxJQUFBLDBCQUFXLEVBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0MsTUFBTSxJQUFJLEdBQUcsSUFBQSwwQkFBVyxFQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRWpDLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxXQUFXLEVBQUUsR0FBRyxJQUFJLE9BQU8sQ0FBQyxVQUFVLENBQUM7UUFFaEUsTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFO1lBQ3ZCLE1BQU0sUUFBUSxHQUFHLGFBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDO1lBQ2pELGFBQUssQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1lBRTFCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sa0JBQWtCLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3RFLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFDL0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDO2dCQUFFLFFBQVEsR0FBRyxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQzFELE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUMsQ0FBQztRQUVGLE1BQU0sT0FBTyxHQUFHLElBQUEsbUNBQWUsR0FBRSxDQUFDO1FBRWxDLE1BQU0scUJBQXFCLEdBQ3pCLGFBQUssQ0FBQyxzQkFBc0I7WUFDNUIsYUFBSyxDQUFDLHNCQUFzQixDQUFDLFFBQVEsS0FBSyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQzdELElBQUksQ0FBQyxJQUFJLElBQUksUUFBUSxJQUFJLHFCQUFxQixFQUFFO1lBQzlDLHFGQUFxRjtZQUNyRiwwQkFBMEI7WUFDMUIsQ0FBQyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sSUFBQSxrQkFBTyxFQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsUUFBUSxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQztZQUV6RSxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsRUFBRTtnQkFDNUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7Z0JBQy9DLE1BQU0sSUFBQSxnQ0FBYyxFQUNsQixJQUFJLEVBQ0osMEJBQWtCLEVBQ2xCLEtBQUssRUFBRSxJQUFZLEVBQUUsR0FBRyxJQUFXLEVBQUUsRUFBRTtvQkFDckMsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7b0JBQ2xELElBQUksSUFBSSxLQUFLLE9BQU8sRUFBRTt3QkFDcEIsT0FBTyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRSxPQUFPLEVBQUUsQ0FBQztxQkFDM0Q7b0JBQ0QsSUFBSSxJQUFJLEtBQUssVUFBVSxFQUFFO3dCQUN2QixNQUFNLElBQUksR0FBRzs0QkFDWCxRQUFRLEVBQUUsYUFBSyxDQUFDLFVBQVU7NEJBQzFCLFFBQVEsRUFBRSxXQUFXLEVBQUU7NEJBQ3ZCLFlBQVksRUFBRSxPQUFPO3lCQUN0QixDQUFDO3dCQUNGLE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLEtBQUssQ0FBQzt3QkFDdEMsS0FBSyxNQUFNLFlBQVksSUFBSSxLQUFLLENBQUMsWUFBWSxJQUFJLEVBQUUsRUFBRTs0QkFDbkQsTUFBTSxZQUFZLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO3lCQUNoQzt3QkFDRCxPQUFPLElBQUksQ0FBQztxQkFDYjtvQkFDRCxJQUFJLElBQUksS0FBSyxRQUFRLEVBQUU7d0JBQ3JCLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUM7d0JBQ3hCLElBQUksUUFBUSxJQUFJLFFBQVEsRUFBRTs0QkFDeEIsaUJBQWlCLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7eUJBQzFEOzZCQUFNOzRCQUNMLGlCQUFpQixDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO3lCQUN4RDt3QkFDRCxPQUFPO3FCQUNSO29CQUNELE9BQU8sQ0FBQyxHQUFHLENBQ1QsbUNBQW1DLEVBQ25DLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FDL0IsQ0FBQztvQkFDRixPQUFPO2dCQUNULENBQUMsQ0FDRixDQUFDO2FBQ0g7U0FDRjtRQUVELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFBLG1CQUFLLEVBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFO1lBQ3ZELHFDQUFxQztZQUNyQyxRQUFRO1lBQ1Isb0JBQW9CLEVBQUUsT0FBTyxDQUFDLHFCQUFxQjtTQUNULENBQUMsQ0FBQztRQUU5QyxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUU7WUFDeEIsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztnQkFDakMsV0FBVyxFQUFFLElBQUk7Z0JBQ2pCLFNBQVMsRUFBRSxJQUFJO2dCQUNmLE9BQU8sRUFBRSxJQUFJO2dCQUNiLEtBQUssRUFBRSxhQUFLLENBQUMsVUFBVzthQUN6QixDQUFDLENBQUM7WUFDSCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsZUFBZSxJQUFJLFdBQVcsQ0FBQztZQUM5RCxNQUFNLFFBQVEsR0FBRyxJQUFJO2lCQUNsQixRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFTLENBQUM7aUJBQ3BELE9BQU8sQ0FBQyxhQUFhLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDL0IsTUFBTSxVQUFVLEdBQUcsYUFBSyxDQUFDLFVBQVUsQ0FBQztZQUNwQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ3RELE1BQU0sUUFBUSxHQUFHLFVBQVUsRUFBRSxPQUFPLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxZQUFZLFdBQVcsUUFBUSxJQUFJLFFBQVEsWUFBWSxPQUFPLE1BQU0sQ0FBQztnQkFDN0YsYUFBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7Z0JBQ3JFLElBQUk7b0JBQ0YsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7aUJBQzdDO2dCQUFDLE1BQU0sR0FBRTtZQUNaLENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFFRCxNQUFNLFdBQVcsR0FBRyxhQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxhQUFLLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBRWhFLGFBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ25DLE1BQU0sS0FBSyxHQUFHLENBQUMsYUFBSyxDQUFDLEtBQUssR0FBRyxNQUFNLElBQUEsc0JBQVMsRUFBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFckUsS0FBSyxNQUFNLGNBQWMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRTtZQUN6RSxNQUFNLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM1QjtRQUVELE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDaEMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3ZCLE1BQU0sR0FBRyxHQUFHLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM1QixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7WUFDYixJQUFJLEdBQUcsRUFBRTtnQkFDUCxJQUFJLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7YUFDM0I7WUFDRCxJQUFJLElBQUk7Z0JBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQzVCLE1BQU0sWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QixJQUFJLElBQUksRUFBRTtnQkFDUixTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNyQixTQUFTLENBQUMsZUFBZSxFQUFFLENBQUM7YUFDN0I7UUFDSCxDQUFDLENBQVEsQ0FBQztRQUVWLE1BQU0scUJBQXFCLEdBQTJCLEVBQUUsQ0FBQztRQUN6RCxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUU7WUFDL0IsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3hCLEtBQUssTUFBTSxNQUFNLElBQUk7Z0JBQ25CLEdBQUcsdUJBQXVCO2dCQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLHFCQUFxQixJQUFJLEVBQUUsQ0FBQzthQUN6QyxFQUFFO2dCQUNELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDckIsT0FBTztpQkFDUjthQUNGO1lBRUQsSUFBSTtnQkFDRixNQUFNLElBQUksR0FBRyxDQUNYLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUN4RCxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFDbEMsSUFBSSxJQUFJLENBQUMsTUFBTTtvQkFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7O29CQUNqQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN2QixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLENBQUMscUJBQXFCLENBQUMsR0FBRyxDQUFDO29CQUFFLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDaEUscUJBQXFCLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQzthQUM5QjtZQUFDLE1BQU07Z0JBQ04sTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN4QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLENBQUMscUJBQXFCLENBQUMsR0FBRyxDQUFDO29CQUFFLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDaEUscUJBQXFCLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQzthQUM5QjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3RELE1BQU0sWUFBWSxHQUFhLEVBQUUsQ0FBQztZQUNsQyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFDdEQsWUFBWSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBQ3hDLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxPQUFPLEVBQUU7Z0JBQ2xDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN2QyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDO2FBQ2xFO1lBQ0QsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzthQUN4RTtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3RELE1BQU0sTUFBTSxHQUFZLEVBQUUsQ0FBQztZQUMzQixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFLLENBQUMsY0FBYyxDQUFDLEVBQUU7Z0JBQy9ELElBQUksS0FBSztvQkFDUCxNQUFNLENBQUMsSUFBSSxDQUNULElBQUksS0FBSyxDQUNQLFlBQVksS0FBSyxJQUFJLEdBQUcsNENBQTRDLENBQ3JFLENBQ0YsQ0FBQzthQUNMO1lBQ0QsYUFBSyxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7WUFDMUIsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO2dCQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzthQUMxRDtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLG9CQUFvQixDQUFDO1FBQzdELElBQUksT0FBTyxFQUFFO1lBQ1gsTUFBTSxVQUFVLEdBQUcsYUFBSyxDQUFDLFVBQVUsQ0FBQztZQUNwQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ3RELE1BQU0sTUFBTSxHQUFHLGFBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxFQUFFLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxDQUFDLE1BQU0sRUFBRTtvQkFDWCxNQUFNLEtBQUssR0FBRyxhQUFLLENBQUMsc0JBQXNCLEVBQUUsS0FBSyxFQUFFLENBQUM7b0JBQ3BELEtBQUssTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxFQUFFO3dCQUNsRCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDeEMsTUFBTSxJQUFJLEdBQUcsR0FBRyxPQUFPLElBQUksVUFBVSxHQUFHLE1BQU0sTUFBTSxDQUFDO3dCQUNyRCxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO3FCQUNqQztpQkFDRjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFFRCxJQUFJLFFBQVEsRUFBRTtZQUNaLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxlQUFlLElBQUksV0FBVyxDQUFDO1lBQzlELE1BQU0sUUFBUSxHQUFHLElBQUk7aUJBQ2xCLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVMsQ0FBQztpQkFDcEQsT0FBTyxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMvQixNQUFNLFVBQVUsR0FBRyxhQUFLLENBQUMsVUFBVSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRTtnQkFDdEQsTUFBTSxLQUFLLEdBQUcsYUFBSyxDQUFDLHNCQUFzQixFQUFFLEtBQUssRUFBZ0IsQ0FBQztnQkFDbEUsS0FBSyxNQUFNLElBQUksSUFBSSxLQUFLLElBQUksRUFBRSxFQUFFO29CQUM5QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDO29CQUNoRCxNQUFNLElBQUEsc0JBQVMsRUFBQyxRQUFRLENBQUMsQ0FBQztvQkFFMUIsTUFBTSxNQUFNLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUM5RCxNQUFNLFFBQVEsR0FBRyxVQUFVLEVBQUUsT0FBTyxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDMUQsTUFBTSxPQUFPLEdBQUcsR0FBRyxRQUFRLFlBQVksT0FBTyxHQUFHLE1BQU0sT0FBTyxDQUFDO29CQUMvRCxNQUFNLElBQUksR0FBRyxHQUFHLFFBQVEsSUFBSSxRQUFRLElBQUksT0FBTyxFQUFFLENBQUM7b0JBQ2xELGFBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO29CQUNyRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUM3QjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFFRCwrRkFBK0Y7UUFDL0YsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNoQyxNQUFNLHFCQUFzQixTQUFRLEtBQUs7WUFBekM7O2dCQUNXLFNBQUksR0FBRyx1QkFBdUIsQ0FBQztZQUMxQyxDQUFDO1NBQUE7UUFFRCxNQUFNLFdBQVcsR0FBd0IsS0FBSyxJQUFJLEVBQUU7WUFDbEQsTUFBTSxLQUFLLEdBQUcsSUFBQSxnQkFBUSxHQUFFLENBQUM7WUFDekIsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUkscUJBQXFCLEVBQUUsQ0FBQyxDQUFDO1lBRXpFLE1BQU0sTUFBTSxHQUFHLEdBQUcsRUFBRTtnQkFDbEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDcEUsQ0FBQyxDQUFDO1lBQ0YsTUFBTSxPQUFPLEdBQUcsWUFBWSxHQUFHLFlBQVksQ0FBQztZQUM1QyxNQUFNLHdCQUF3QixHQUM1QixPQUFPLENBQUMsd0JBQXdCO2dCQUNoQyxPQUFPLENBQUMsd0JBQXdCO2dCQUNoQyxTQUFTLENBQUMsT0FBTyxDQUFDO2dCQUNsQixJQUFJLENBQUM7WUFFUCxVQUFVLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ3BCLElBQUksWUFBWSxHQUFHLFlBQVksS0FBSyxPQUFPO29CQUFFLE9BQU87Z0JBQ3BELG1FQUFtRTtnQkFDbkUsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sS0FBSyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7Z0JBQ3RFLElBQUksTUFBTTtvQkFBRSxPQUFPLGdCQUFnQixFQUFFLENBQUM7Z0JBRXRDLHVGQUF1RjtnQkFDdkYsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQUMsQ0FBQztZQUN4RSxDQUFDLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztZQUU3QixJQUFJO2lCQUNELElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxDQUFDO2lCQUNyRSxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUNyQixNQUFNLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxLQUFLLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztnQkFFdEUsSUFBSSxNQUFNO29CQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbEMsQ0FBQyxDQUFDO2lCQUNELElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMscUJBQXFCLEVBQUUsT0FBTyxDQUFDO2lCQUNsRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFFL0IsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUNuQyxNQUFNLFdBQVcsR0FBRyxZQUFZLEVBQUUsR0FBRyxDQUFDLENBQUM7Z0JBQ3ZDLE1BQU0sSUFBSSxHQUFHLFdBQVc7b0JBQ3RCLENBQUMsQ0FBQyw0QkFBNEIsWUFBWSxHQUFHLENBQUMsTUFBTTtvQkFDcEQsQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDaEIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxvQkFBb0IsS0FBSyxDQUFDLElBQUksUUFBUSxhQUFLLENBQUMsVUFBVSxLQUFLLElBQUksRUFBRSxDQUNsRSxDQUFDO2dCQUNGLElBQUksV0FBVztvQkFBRSxPQUFPLFdBQVcsRUFBRSxDQUFDO2dCQUN0QyxNQUFNLElBQUkscUJBQXFCLEVBQUUsQ0FBQztZQUNwQyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLE1BQU0sUUFBUSxHQUFHLGFBQUssQ0FBQyxVQUFVLENBQUM7UUFDbEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLHFCQUFxQixHQUFHLElBQUEsZ0JBQVEsR0FBRSxDQUFDO1FBQzNELE1BQU0sV0FBVyxFQUFFLENBQUM7UUFFcEIsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUNsQyxDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7WUFDekIsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQyxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsUUFBUyxDQUFDLENBQUM7WUFDN0MsR0FBRyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLFFBQVMsQ0FBQyxDQUFDO1lBQzdDLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxRQUFRLHFCQUFxQixDQUFDLENBQUM7WUFDcEQsT0FBTyxRQUFRLENBQUM7UUFDbEIsQ0FBQyxFQUNELEVBQUUsUUFBUSxFQUFFLGFBQUssQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQ3hELENBQUM7UUFFRixJQUFJLFdBQVcsRUFBRTtZQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxRQUFRLHFCQUFxQixDQUFDLENBQUM7U0FDckQ7UUFDRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUU7WUFDdEQsTUFBTSxVQUFVLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQztZQUNsQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDckIsTUFBTSxNQUFNLEdBQUcsYUFBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ2pELElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxXQUFXLEVBQUU7b0JBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQ1QsSUFBSSxhQUFLLENBQUMsVUFBVSxtQkFBbUIsUUFBUSxDQUFDLE9BQU8sQ0FDckQsc0JBQXNCLEVBQ3RCLFdBQVcsQ0FDWixxQkFBcUIsQ0FDdkIsQ0FBQztpQkFDSDtZQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLE1BQU0sR0FBRyxDQUFDLGFBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxFQUFFLE1BQVcsRUFBRSxFQUFFO1lBQ25ELElBQUksT0FBTyxNQUFNLEtBQUssVUFBVTtnQkFBRSxNQUFNLEdBQUcsRUFBRSxDQUFDO1lBQzlDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEdBQUcsSUFBQSxnQkFBUSxHQUFFLENBQUM7WUFFbkQsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUNqQixDQUFDLEVBQUUsTUFBTSxFQUFFLGtCQUFrQixFQUFFLEVBQUUsRUFBRTtnQkFDakMsTUFBTSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsR0FBSSxNQUFjLENBQUMsa0JBQWtCLENBQUM7cUJBQzVELGFBQWEsQ0FBQztnQkFDakIsT0FBTyxDQUFDLE9BQU8sRUFBRTtxQkFDZCxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUM1QixJQUFJLENBQUMsQ0FBQyxNQUFXLEVBQUUsRUFBRTtvQkFDbkIsTUFBYyxDQUFDLGtCQUFrQixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztvQkFDMUQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDeEIsQ0FBQyxDQUFDO3FCQUNELEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO29CQUNkLE1BQWMsQ0FDWixrQkFBa0IsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsTUFBYSxDQUFDO3lCQUN2RCxjQUFjLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO29CQUM3QixLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN0QixDQUFDLENBQUMsQ0FBQztZQUNQLENBQUMsRUFDRCxFQUFFLE1BQU0sRUFBRSxrQkFBa0IsRUFBbEIsMEJBQWtCLEVBQUUsQ0FDL0IsQ0FBQztZQUNGLE9BQU8sTUFBTSxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQztRQUM5RCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sUUFBUSxHQUFHO1lBQ2YsSUFBSTtZQUNKLEtBQUs7WUFDTCxNQUFNO1lBQ04sT0FBTyxFQUFFLDBCQUFXO1NBQ3JCLENBQUM7UUFFRixPQUFPLFFBQVEsQ0FBQztLQUNqQjtTQUFNO1FBQ0wsSUFBSSxDQUFDLGFBQUssQ0FBQyxZQUFZLEVBQUU7WUFDdkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO1NBQ3ZFO1FBQ0QsSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFO1lBQ25CLElBQUk7Z0JBQ0YsTUFBTSxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO2dCQUNuRSxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO2dCQUNuQyxNQUFNLFNBQVMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2dCQUNyRCxNQUFNLFNBQVMsR0FBRyxRQUFRLEtBQUssU0FBUyxDQUFDLFFBQVEsQ0FBQztnQkFFbEQsb0hBQW9IO2dCQUNwSCwrQ0FBK0M7Z0JBQy9DLE1BQU0sSUFBSSxHQUFHLFNBQVMsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFFL0QsSUFBSSxDQUFDLElBQUksRUFBRTtvQkFDVCxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDcEQsTUFBTSxNQUFNLEdBQUcsSUFBSSxlQUFlLENBQUM7d0JBQ2pDLEdBQUcsR0FBRyxDQUFDLFlBQVk7d0JBQ25CLEdBQUcsQ0FBQyxHQUFHLElBQUksZUFBZSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztxQkFDN0MsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUNkLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO29CQUNwQixHQUFHLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7b0JBQ3pCLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUM7aUJBQ3ZDO2FBQ0Y7WUFBQyxNQUFNLEdBQUU7U0FDWDtRQUNELE1BQU0sV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTNCLE1BQU0sTUFBTSxHQUFRLENBQUMsYUFBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLE1BQVcsRUFBRSxRQUFhLEVBQUUsRUFBRTtZQUNqRSxJQUFJLENBQUMsUUFBUTtnQkFBRSxRQUFRLEdBQUcsTUFBTSxDQUFDO1lBQ2pDLE1BQU0sS0FBSyxHQUFHLElBQUEsZ0JBQVEsR0FBRSxDQUFDO1lBQ3pCLElBQUksQ0FBRSxNQUFjLENBQUMsMEJBQWtCLENBQUMsRUFBRTtnQkFDeEMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxpR0FBaUcsRUFDakcsUUFBUSxDQUNULENBQUM7Z0JBQ0QsTUFBYyxDQUFDLE9BQU8sR0FBRyxDQUFDLE1BQVcsRUFBRSxFQUFFO29CQUN4QyxPQUFRLE1BQWMsQ0FBQyxPQUFPLENBQUM7b0JBQy9CLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ3RCLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUMxQixDQUFDLENBQUM7YUFDSDtpQkFBTTtnQkFDSixNQUFjLENBQUMsMEJBQWtCLENBQUMsQ0FBQyxhQUFhLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUM7YUFDekU7WUFFRCxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLE9BQVEsTUFBYyxDQUFDLDBCQUFrQixDQUFDLEtBQUssVUFBVSxFQUFFO1lBQzVELE1BQWMsQ0FBQywwQkFBa0IsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDaEQ7UUFFRCxvQkFBb0I7UUFFcEIsT0FBTztZQUNMLElBQUksRUFBRSw2QkFBYTtZQUNuQixLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtZQUM5QixNQUFNO1lBQ04sT0FBTyxFQUFFLDZCQUFhO1NBQ3ZCLENBQUM7S0FDSDtBQUNILENBQUM7QUFuYkQsd0JBbWJDIn0=